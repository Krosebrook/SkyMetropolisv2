<div align="center">
<img width="1200" height="475" alt="GHBanner" src="https://github.com/user-attachments/assets/0aa67016-6eaf-458a-adb2-6e31a0763ed6" />
</div>

# Sky Metropolis v2

A 3D isometric city-building simulation game powered by React, Three.js, and Google's Gemini AI.

[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](LICENSE)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.8-blue)](https://www.typescriptlang.org/)
[![React](https://img.shields.io/badge/React-19.2-61dafb)](https://react.dev/)
[![Three.js](https://img.shields.io/badge/Three.js-0.173-black)](https://threejs.org/)

ğŸ® Build and manage your own virtual metropolis with AI-generated missions and dynamic city simulation.

## âœ¨ Features

- ğŸ™ï¸ **3D Isometric City Building** - Build roads, residential, commercial, industrial zones, parks, and water features
- ğŸ¤– **AI-Powered Missions** - Dynamic objectives generated by Google Gemini AI
- ğŸ“ˆ **City Simulation** - Population dynamics, happiness system, and economic management
- ğŸš— **Live Traffic System** - Animated cars navigating road networks with traffic lights
- ğŸš¶ **Pedestrian & Wildlife** - Animated citizens and animals bring your city to life
- ğŸµ **Immersive Audio** - Sound effects and ambient background music
- ğŸ’¾ **Auto-Save** - Progress saved automatically to localStorage
- ğŸ® **Two Game Modes** - AI-assisted with missions or sandbox mode with unlimited resources

## ğŸ“š Documentation

- **[Executive Summary](EXECUTIVE_SUMMARY.md)** - High-level overview for stakeholders
- **[Audit & PRD](AUDIT_AND_PRD.md)** - Comprehensive product requirements and roadmap (31 KB)
- **[Technical Audit](TECHNICAL_AUDIT.md)** - Detailed code analysis and security review (27 KB)
- **[Production Roadmap](ROADMAP.md)** - 3-week action plan to production (11 KB)

## ğŸš€ Quick Start

### Prerequisites

- **Node.js** (v18 or higher)
- **npm** or **yarn**

### Installation

1. **Clone the repository**
   ```bash
   git clone https://github.com/Krosebrook/SkyMetropolisv2.git
   cd SkyMetropolisv2
   ```

2. **Install dependencies**
   ```bash
   npm install
   ```

3. **Set up environment variables**
   ```bash
   # Create .env.local file
   echo "API_KEY=your_gemini_api_key_here" > .env.local
   ```
   > âš ï¸ **Security Note:** In production, API keys should never be exposed in the frontend. See [Technical Audit](TECHNICAL_AUDIT.md#vuln-001-api-key-exposure-) for the recommended backend proxy solution.

4. **Run the development server**
   ```bash
   npm run dev
   ```

5. **Open your browser**
   ```
   http://localhost:5173
   ```

## ğŸ® How to Play

1. **Start the Game** - Choose between AI-assisted mode or sandbox mode
2. **Select a Tool** - Use number keys (1-7) or click toolbar buttons
3. **Build Your City** - Click on tiles to place buildings
4. **Manage Resources** - Balance money, population, and happiness
5. **Complete Missions** - Fulfill AI-generated objectives for rewards
6. **Expand** - Grow your city across the 48Ã—48 grid

### Controls

- **Mouse:**
  - Left-click: Place building
  - Right-drag: Rotate camera
  - Scroll: Zoom in/out
- **Keyboard:**
  - 1-7: Select building tools
  - ESC: Deselect tool

## ğŸ—ï¸ Project Structure

```
SkyMetropolisv2/
â”œâ”€â”€ components/          # UI and 3D rendering components
â”‚   â”œâ”€â”€ HUD.tsx         # Heads-up display
â”‚   â”œâ”€â”€ IsoMap.tsx      # Main 3D scene
â”‚   â”œâ”€â”€ StartScreen.tsx # Game initialization
â”‚   â””â”€â”€ World/          # 3D assets and systems
â”œâ”€â”€ context/            # Global state management
â”œâ”€â”€ engine/             # Game logic and simulation
â”œâ”€â”€ services/           # AI and city services
â”œâ”€â”€ repositories/       # Data persistence
â”œâ”€â”€ hooks/              # Custom React hooks
â”œâ”€â”€ types.ts            # TypeScript definitions
â”œâ”€â”€ constants.tsx       # Game configuration
â””â”€â”€ App.tsx             # Application root
```

## ğŸ”§ Build for Production

```bash
npm run build
```

Output will be in the `dist/` directory.

### Build Stats
- Bundle Size: 393 KB (gzipped)
- Build Time: ~6 seconds
- Target: ES2020

## ğŸ§ª Current Status

**Version:** 0.0.0 (Pre-production)  
**Production Readiness:** 70%  
**Code Quality:** 8/10

### âœ… Completed
- Core city-building mechanics
- 3D rendering with Three.js
- AI integration with Gemini
- Traffic and pedestrian simulation
- Audio system
- Save/load functionality

### âš ï¸ Critical Issues
1. **API Key Security** - Needs backend proxy (see [Technical Audit](TECHNICAL_AUDIT.md))
2. **Bundle Optimization** - Code splitting required

### ğŸ“‹ Next Steps
See [ROADMAP.md](ROADMAP.md) for the complete 3-week production plan.

## ğŸ¤ Contributing

Contributions are welcome! Please read our contributing guidelines before submitting PRs.

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## ğŸ“„ License

This project is licensed under the Apache License 2.0 - see the [LICENSE](LICENSE) file for details.

## ğŸ”— Links

- **AI Studio App:** https://ai.studio/apps/drive/1EOJL8f2AqsC9-Ad5I6lVqMk4s3B83M9s
- **Repository:** https://github.com/Krosebrook/SkyMetropolisv2

## ğŸ™ Acknowledgments

- **Three.js** - 3D rendering engine
- **React Three Fiber** - React renderer for Three.js
- **Google Gemini AI** - Dynamic content generation
- **Howler.js** - Audio playback
- **Vite** - Build tool

---

**Made with â¤ï¸ by the Sky Metropolis team**
